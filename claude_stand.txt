Die Änderung ist sehr sinnvoll. Du hast einen Hybrid-Ansatz implementiert:                                                          
                                                                                                                                      
  Was du geändert hast                                                                                                                
                                                                                                                                      
  VORHER:                          NACHHER:                                                                                           
  ┌─────────────────────┐          ┌─────────────────────┐                                                                            
  │ Nur Learning-basiert│          │ 1. Baseline (sofort)│ ← NEU                                                                      
  │ (braucht 2+ Zyklen) │          │ 2. Learning (wenn   │                                                                            
  └─────────────────────┘          │    genug Daten)     │                                                                            
                                   └─────────────────────┘                                                                            
                                                                                                                                      
  Warum das gut ist                                                                                                                   
  ┌────────────────────────────────────┬─────────────────────────────────────────────────────────────┐                                
  │               Aspekt               │                          Bewertung                          │                                
  ├────────────────────────────────────┼─────────────────────────────────────────────────────────────┤                                
  │ Neue User bekommen sofort Feedback │ Zervixschleim, Schmierblutung etc. funktionieren ab Tag 1   │                                
  ├────────────────────────────────────┼─────────────────────────────────────────────────────────────┤                                
  │ Baseline ist konservativ           │ Nur 5 PMS-Indikatoren statt 20 → weniger False Positives    │                                
  ├────────────────────────────────────┼─────────────────────────────────────────────────────────────┤                                
  │ Prioritäten stimmen                │ Fruchtbarkeit (Goldstandard) → Periode → PMS                │                                
  ├────────────────────────────────────┼─────────────────────────────────────────────────────────────┤                                
  │ Baseline passt nicht an            │ daysAdjustment: 0 → Korrekt, da keine persönlichen Daten    │                                
  ├────────────────────────────────────┼─────────────────────────────────────────────────────────────┤                                
  │ 3 vs 7 Tage Fenster                │ Baseline nutzt kürzeres Fenster → aktueller = zuverlässiger │                                
  └────────────────────────────────────┴─────────────────────────────────────────────────────────────┘                                
  Verbesserungsvorschläge                                                                                                             
                                                                                                                                      
  1. libido_high zu Baseline-Fruchtbarkeit hinzufügen                                                                                 
                                                                                                                                      
  Hohe Libido um Eisprung ist wissenschaftlich gut belegt:                                                                            
                                                                                                                                      
  const BASELINE_FERTILITY_INDICATORS: SymptomType[] = [                                                                              
    'cm_eggwhite',                                                                                                                    
    'cm_watery',                                                                                                                      
    'pain_ovulation',                                                                                                                 
    'libido_high',  // ← Hinzufügen                                                                                                   
  ];                                                                                                                                  
                                                                                                                                      
  2. Severity-Gewichtung für Baseline                                                                                                 
                                                                                                                                      
  Starke Symptome (4-5) sind aussagekräftiger als schwache (1-2):                                                                     
                                                                                                                                      
  // In analyzeBaselineSymptomSignal:                                                                                                 
  const strongPmsSymptoms = pmsSymptoms.filter(s => s.severity >= 3);                                                                 
                                                                                                                                      
  if (strongPmsSymptoms.length >= 2 && cycleDay > avgCycleLength - 10) {                                                              
    // ...                                                                                                                            
  }                                                                                                                                   
                                                                                                                                      
  3. Kombiniertes Signal statt Override                                                                                               
                                                                                                                                      
  Wenn Baseline UND Learning beide etwas finden, könnte man die Konfidenz erhöhen:                                                    
                                                                                                                                      
  // Wenn baselineSignal und learnedSignal beide 'fertile_window' → confidence: 'high'                                                
  if (baselineSignal?.type === learnedSignal?.type) {                                                                                 
    return { ...learnedSignal, confidence: 'high' };                                                                                  
  }                                                                                                                                   
                                                                                                                                      
  4. Dokumentation aktualisieren                                                                                                      
                                                                                                                                      
  Die dokumentation/ALGORITHMUS.md sollte den neuen Hybrid-Ansatz beschreiben.                                                        
                                                                                                                                      
  ---                                                                                                                                 
  Soll ich diese Verbesserungen implementieren?                                                                                       
                                                                                                                                      
✻ Worked for 55s                                                                                                                      
                                                                                                                                      
❯ ja                                                                                                                                  
                                                                                                                                      
● Update(src/utils/calculations.ts)                                                                                                   
  ⎿  Added 1 line                                                                                                                     
      410    'cm_eggwhite',      // Spinnbarer Zervixschleim = höchste Fruchtbarkeit                                                  
      411    'cm_watery',        // Wässriger Schleim = hohe Fruchtbarkeit                                                            
      412    'pain_ovulation',   // Mittelschmerz = direkter Eisprung-Indikator                                                       
      413 +  'libido_high',      // Hohe Libido um Eisprung = wissenschaftlich belegt                                                 
      414  ];                                                                                                                         
      415                                                                                                                             
      416  // Direkte Perioden-Vorboten                                                                                               
                                                                                                                                      
● Update(src/utils/calculations.ts)                                                                                                   
  ⎿  Added 21 lines, removed 8 lines                                                                                                  
      482      const hasEggWhite = fertilitySymptoms.some(s => s.symptomType === 'cm_eggwhite');                                      
      483      const hasWatery = fertilitySymptoms.some(s => s.symptomType === 'cm_watery');                                          
      484      const hasOvulationPain = fertilitySymptoms.some(s => s.symptomType === 'pain_ovulation');                              
      485 +    const hasHighLibido = fertilitySymptoms.some(s => s.symptomType === 'libido_high');                                    
      486                                                                                                                             
      487      // Only trigger if we're in a plausible window (cycle day 8-22)                                                        
      488      if (cycleDay >= 8 && cycleDay <= 22) {                                                                                 
      489        let confidence: 'low' | 'medium' | 'high' = 'medium';                                                                
      490        let message = '';                                                                                                    
      491                                                                                                                             
      492 +      // Count strong indicators for confidence calculation                                                                
      493 +      const strongIndicators = [hasEggWhite, hasWatery && hasOvulationPain, hasOvulationPain && hasHighLibido].filte       
          +r(Boolean).length;                                                                                                         
      494 +                                                                                                                           
      495        if (hasEggWhite) {                                                                                                   
      496          confidence = 'high';                                                                                               
      497          message = 'Spinnbarer Zervixschleim erkannt - dies ist der zuverlässigste Fruchtbarkeitsindikator (Goldstand       
           ard der NFP).';                                                                                                            
      498        } else if (hasWatery && hasOvulationPain) {                                                                          
      499          confidence = 'high';                                                                                               
      500          message = 'Wässriger Zervixschleim und Mittelschmerz erkannt - wahrscheinlich Eisprung.';                          
      501 +      } else if (hasOvulationPain && hasHighLibido) {                                                                      
      502 +        confidence = 'high';                                                                                               
      503 +        message = 'Mittelschmerz und hohe Libido erkannt - typische Eisprung-Kombination.';                                
      504        } else if (hasOvulationPain) {                                                                                       
      505          confidence = 'medium';                                                                                             
      506          message = 'Mittelschmerz erkannt - kann auf Eisprung hindeuten.';                                                  
      507        } else if (hasWatery) {                                                                                              
      508          confidence = 'medium';                                                                                             
      509          message = 'Wässriger Zervixschleim erkannt - möglicherweise fruchtbare Phase.';                                    
      510 +      } else if (hasHighLibido) {                                                                                          
      511 +        confidence = 'low';                                                                                                
      512 +        message = 'Hohe Libido erkannt - kann auf fruchtbare Phase hindeuten.';                                            
      513        }                                                                                                                    
      514                                                                                                                             
      505 -      return {                                                                                                             
      506 -        type: 'fertile_window',                                                                                            
      507 -        confidence,                                                                                                        
      508 -        daysAdjustment: 0,                                                                                                 
      509 -        relevantSymptoms: fertilitySymptoms.map(s => s.symptomType),                                                       
      510 -        message,                                                                                                           
      511 -        basedOnCycles: 0  // 0 = baseline knowledge, not learned                                                           
      512 -      };                                                                                                                   
      515 +      // Only return if we have a meaningful message                                                                       
      516 +      if (message) {                                                                                                       
      517 +        return {                                                                                                           
      518 +          type: 'fertile_window',                                                                                          
      519 +          confidence,                                                                                                      
      520 +          daysAdjustment: 0,                                                                                               
      521 +          relevantSymptoms: [...new Set(fertilitySymptoms.map(s => s.symptomType))],                                       
      522 +          message,                                                                                                         
      523 +          basedOnCycles: 0  // 0 = baseline knowledge, not learned                                                         
      524 +        };                                                                                                                 
      525 +      }                                                                                                                    
      526      }                                                                                                                      
      527    }                                                                                                                        
      528                                                                                                                             
                                                                                                                                      
● Update(src/utils/calculations.ts)                                                                                                   
  ⎿  Added 15 lines, removed 2 lines                                                                                                  
      550                                                                                                                             
      551    // ========================================                                                                              
      552    // CHECK 3: PMS indicators (multiple symptoms in late luteal phase)                                                      
      553 +  // Severity-weighted: stronger symptoms (3+) count more                                                                  
      554    // ========================================                                                                              
      555    const pmsSymptoms = recentSymptoms.filter(s =>                                                                           
      556      BASELINE_PMS_INDICATORS.includes(s.symptomType)                                                                        
     ...                                                                                                                              
      558                                                                                                                             
      559    // Need at least 2 PMS symptoms and be in late luteal phase                                                              
      560    if (pmsSymptoms.length >= 2 && cycleDay > avgCycleLength - 10) {                                                         
      560 -    const confidence = pmsSymptoms.length >= 3 ? 'medium' : 'low';                                                         
      561 +    // Count strong symptoms (severity >= 3) separately                                                                    
      562 +    const strongPmsSymptoms = pmsSymptoms.filter(s => s.severity >= 3);                                                    
      563 +    const avgSeverity = pmsSymptoms.reduce((sum, s) => sum + s.severity, 0) / pmsSymptoms.length;                          
      564                                                                                                                             
      565 +    // Confidence based on count AND severity                                                                              
      566 +    let confidence: 'low' | 'medium' | 'high' = 'low';                                                                     
      567 +    if (strongPmsSymptoms.length >= 3 || (pmsSymptoms.length >= 3 && avgSeverity >= 3.5)) {                                
      568 +      confidence = 'high';                                                                                                 
      569 +    } else if (strongPmsSymptoms.length >= 2 || pmsSymptoms.length >= 3) {                                                 
      570 +      confidence = 'medium';                                                                                               
      571 +    }                                                                                                                      
      572 +                                                                                                                           
      573 +    const severityNote = avgSeverity >= 3.5 ? ' (ausgeprägt)' : '';                                                        
      574 +                                                                                                                           
      575      return {                                                                                                               
      576        type: 'pms_pattern_match',                                                                                           
      577        confidence,                                                                                                          
      578        daysAdjustment: 0, // Baseline doesn't adjust, only informs                                                          
      579        relevantSymptoms: [...new Set(pmsSymptoms.map(s => s.symptomType))],                                                 
      567 -      message: `${pmsSymptoms.length} typische PMS-Symptome erkannt - die Periode nähert sich möglicherweise.`,            
      580 +      message: `${pmsSymptoms.length} typische PMS-Symptome erkannt${severityNote} - die Periode nähert sich möglich       
          +erweise.`,                                                                                                                 
      581        basedOnCycles: 0                                                                                                     
      582      };                                                                                                                     
      583    }                                                                                                                        
  ⎿  You've hit your limit · resets 5am (Europe/Berlin) 










Verbesserungsvorschläge                                                                                                             
                                                                                                                                      
  1. libido_high zu Baseline-Fruchtbarkeit hinzufügen                                                                                 
                                                                                                                                      
  Hohe Libido um Eisprung ist wissenschaftlich gut belegt:                                                                            
                                                                                                                                      
  const BASELINE_FERTILITY_INDICATORS: SymptomType[] = [                                                                              
    'cm_eggwhite',                                                                                                                    
    'cm_watery',                                                                                                                      
    'pain_ovulation',                                                                                                                 
    'libido_high',  // ← Hinzufügen                                                                                                   
  ];                                                                                                                                  
                                                                                                                                      
  2. Severity-Gewichtung für Baseline                                                                                                 
                                                                                                                                      
  Starke Symptome (4-5) sind aussagekräftiger als schwache (1-2):                                                                     
                                                                                                                                      
  // In analyzeBaselineSymptomSignal:                                                                                                 
  const strongPmsSymptoms = pmsSymptoms.filter(s => s.severity >= 3);                                                                 
                                                                                                                                      
  if (strongPmsSymptoms.length >= 2 && cycleDay > avgCycleLength - 10) {                                                              
    // ...                                                                                                                            
  }                                                                                                                                   
                                                                                                                                      
  3. Kombiniertes Signal statt Override                                                                                               
                                                                                                                                      
  Wenn Baseline UND Learning beide etwas finden, könnte man die Konfidenz erhöhen:                                                    
                                                                                                                                      
  // Wenn baselineSignal und learnedSignal beide 'fertile_window' → confidence: 'high'                                                
  if (baselineSignal?.type === learnedSignal?.type) {                                                                                 
    return { ...learnedSignal, confidence: 'high' };                                                                                  
  }                                                                                                                                   
                                                                                                                                      
  4. Dokumentation aktualisieren                                                                                                      
                                                                                                                                      
  Die dokumentation/ALGORITHMUS.md sollte den neuen Hybrid-Ansatz beschreiben.                                                        
                                                                                                                                      
  ---                                                                                                                                 
  Soll ich diese Verbesserungen implementieren?
